#!/bin/bash

if [ -d "./Step/bin" ] && ! git diff --cached --name-only | grep -q '^DotNet/'; then
  echo "No changes detected in DotNet. Skipping build."
  exit 0
fi

mkdir -p ./Step/bin
rm -rf ./Step/bin/*

dotnet publish DotNet/StoreGate \
  --output ./Step/bin \
  --configuration Release \
  --runtime linux-x64

git add ./Step/bin/*